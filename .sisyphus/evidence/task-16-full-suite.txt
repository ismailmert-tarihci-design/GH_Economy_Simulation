============================= test session starts ==============================
platform darwin -- Python 3.13.0, pytest-8.3.2, pluggy-1.6.0 -- /usr/local/bin/python3
cachedir: .pytest_cache
rootdir: /Users/mertt7/Documents/GitHub/coin_sim
configfile: pytest.ini
collecting ... collected 176 items

tests/test_coin_economy.py::TestComputeCoinIncome::test_income_gold_shared_level_5_8_dupes PASSED [  0%]
tests/test_coin_economy.py::TestComputeCoinIncome::test_income_gold_shared_level_1_10_dupes PASSED [  1%]
tests/test_coin_economy.py::TestComputeCoinIncome::test_income_blue_shared_level_3_5_dupes PASSED [  1%]
tests/test_coin_economy.py::TestComputeCoinIncome::test_income_unique_level_2_3_dupes PASSED [  2%]
tests/test_coin_economy.py::TestComputeCoinIncome::test_income_maxed_gold_shared PASSED [  2%]
tests/test_coin_economy.py::TestComputeCoinIncome::test_income_maxed_unique PASSED [  3%]
tests/test_coin_economy.py::TestComputeCoinIncome::test_income_zero_dupes PASSED [  3%]
tests/test_coin_economy.py::TestComputeUpgradeCoinCost::test_upgrade_cost_gold_shared_level_1 PASSED [  4%]
tests/test_coin_economy.py::TestComputeUpgradeCoinCost::test_upgrade_cost_gold_shared_level_5 PASSED [  5%]
tests/test_coin_economy.py::TestComputeUpgradeCoinCost::test_upgrade_cost_blue_shared_level_2 PASSED [  5%]
tests/test_coin_economy.py::TestComputeUpgradeCoinCost::test_upgrade_cost_unique_level_3 PASSED [  6%]
tests/test_coin_economy.py::TestComputeUpgradeCoinCost::test_upgrade_cost_maxed_gold_shared PASSED [  6%]
tests/test_coin_economy.py::TestComputeUpgradeCoinCost::test_upgrade_cost_maxed_unique PASSED [  7%]
tests/test_coin_economy.py::TestCanAffordUpgrade::test_can_afford_sufficient_coins PASSED [  7%]
tests/test_coin_economy.py::TestCanAffordUpgrade::test_cannot_afford_insufficient_coins PASSED [  8%]
tests/test_coin_economy.py::TestCanAffordUpgrade::test_can_afford_exact_coins PASSED [  9%]
tests/test_coin_economy.py::TestCanAffordUpgrade::test_can_afford_maxed_card PASSED [  9%]
tests/test_coin_economy.py::TestCoinLedger::test_add_income PASSED       [ 10%]
tests/test_coin_economy.py::TestCoinLedger::test_spend_success PASSED    [ 10%]
tests/test_coin_economy.py::TestCoinLedger::test_spend_failure_insufficient_balance PASSED [ 11%]
tests/test_coin_economy.py::TestCoinLedger::test_spend_exact_balance PASSED [ 11%]
tests/test_coin_economy.py::TestCoinLedger::test_daily_summary_single_day PASSED [ 12%]
tests/test_coin_economy.py::TestCoinLedger::test_daily_summary_multiple_days PASSED [ 13%]
tests/test_coin_economy.py::TestCoinLedger::test_daily_summary_empty_day PASSED [ 13%]
tests/test_coin_economy.py::TestCoinLedger::test_transaction_dataclass PASSED [ 14%]
tests/test_coin_economy.py::TestCoinEconomyIntegration::test_full_game_day_workflow PASSED [ 14%]
tests/test_coin_economy.py::TestCoinEconomyIntegration::test_insufficient_coins_workflow PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_load_defaults_returns_simconfig PASSED [ 15%]
tests/test_config_loader.py::TestConfigLoader::test_load_defaults_has_nine_packs PASSED [ 16%]
tests/test_config_loader.py::TestConfigLoader::test_load_defaults_has_three_upgrade_tables PASSED [ 17%]
tests/test_config_loader.py::TestConfigLoader::test_upgrade_tables_have_correct_lengths PASSED [ 17%]
tests/test_config_loader.py::TestConfigLoader::test_duplicate_ranges_structure PASSED [ 18%]
tests/test_config_loader.py::TestConfigLoader::test_coin_per_duplicate_structure PASSED [ 18%]
tests/test_config_loader.py::TestConfigLoader::test_progression_mapping_contains_expected_keys PASSED [ 19%]
tests/test_config_loader.py::TestConfigLoader::test_unique_unlock_schedule_is_dict PASSED [ 19%]
tests/test_config_loader.py::TestConfigLoader::test_pack_averages_has_nine_entries PASSED [ 20%]
tests/test_config_loader.py::TestConfigLoader::test_all_required_fields_populated PASSED [ 21%]
tests/test_config_loader.py::TestConfigLoader::test_pack_card_types_table_structure PASSED [ 21%]
tests/test_drop_algorithm.py::test_balanced_state_distribution PASSED    [ 22%]
tests/test_drop_algorithm.py::test_positive_gap_catches_up_shared PASSED [ 22%]
tests/test_drop_algorithm.py::test_negative_gap_catches_up_unique PASSED [ 23%]
tests/test_drop_algorithm.py::test_shared_streak_penalty PASSED          [ 23%]
tests/test_drop_algorithm.py::test_unique_streak_penalty PASSED          [ 24%]
tests/test_drop_algorithm.py::test_deterministic_mode PASSED             [ 25%]
tests/test_drop_algorithm.py::test_streak_update_shared PASSED           [ 25%]
tests/test_drop_algorithm.py::test_streak_update_unique PASSED           [ 26%]
tests/test_drop_algorithm.py::test_streak_update_alternating PASSED      [ 26%]
tests/test_drop_algorithm.py::test_constants_exported PASSED             [ 27%]
tests/test_drop_algorithm.py::test_empty_card_list_safe PASSED           [ 27%]
tests/test_drop_algorithm.py::test_shared_card_level_weighting PASSED    [ 28%]
tests/test_drop_algorithm.py::test_shared_card_color_streak_penalty PASSED [ 28%]
tests/test_drop_algorithm.py::test_unique_card_hero_streak_penalty PASSED [ 29%]
tests/test_drop_algorithm.py::test_deterministic_card_selection PASSED   [ 30%]
tests/test_drop_algorithm.py::test_maxed_card_zero_duplicates PASSED     [ 30%]
tests/test_drop_algorithm.py::test_duplicate_calculation_midpoint PASSED [ 31%]
tests/test_drop_algorithm.py::test_full_pull_integration PASSED          [ 31%]
tests/test_drop_algorithm.py::test_update_color_streak_gold PASSED       [ 32%]
tests/test_drop_algorithm.py::test_update_color_streak_blue PASSED       [ 32%]
tests/test_drop_algorithm.py::test_update_hero_streak_resets_others PASSED [ 33%]
tests/test_integration.py::test_full_simulation_1_day PASSED             [ 34%]
tests/test_integration.py::test_full_simulation_100_days_monotonic PASSED [ 34%]
tests/test_integration.py::test_mc_simulation_10x10 PASSED               [ 35%]
tests/test_integration.py::test_edge_case_zero_packs PASSED              [ 35%]
tests/test_integration.py::test_edge_case_single_day PASSED              [ 36%]
tests/test_integration.py::test_edge_case_max_days_730 PASSED            [ 36%]
tests/test_integration.py::test_edge_case_all_cards_maxed PASSED         [ 37%]
tests/test_integration.py::test_coin_conservation PASSED                 [ 38%]
tests/test_integration.py::test_url_config_roundtrip_simulation PASSED   [ 38%]
tests/test_integration.py::test_drop_algorithm_statistical_consistency PASSED [ 39%]
tests/test_integration.py::test_progression_consistency PASSED           [ 39%]
tests/test_integration.py::test_deterministic_reproducibility PASSED     [ 40%]
tests/test_integration.py::test_unique_unlock_schedule_integration PASSED [ 40%]
tests/test_models.py::TestCardCategory::test_card_category_values PASSED [ 41%]
tests/test_models.py::TestCard::test_card_defaults PASSED                [ 42%]
tests/test_models.py::TestCard::test_card_with_explicit_values PASSED    [ 42%]
tests/test_models.py::TestCard::test_card_json_serialization PASSED      [ 43%]
tests/test_models.py::TestCard::test_card_json_contains_all_fields PASSED [ 43%]
tests/test_models.py::TestStreakState::test_streak_state_basic PASSED    [ 44%]
tests/test_models.py::TestStreakState::test_streak_state_with_dicts PASSED [ 44%]
tests/test_models.py::TestStreakState::test_streak_state_json_serialization PASSED [ 45%]
tests/test_models.py::TestGameState::test_game_state_basic PASSED        [ 46%]
tests/test_models.py::TestGameState::test_game_state_with_cards PASSED   [ 46%]
tests/test_models.py::TestGameState::test_game_state_json_serialization PASSED [ 47%]
tests/test_models.py::TestPackConfig::test_pack_config_basic PASSED      [ 47%]
tests/test_models.py::TestPackConfig::test_pack_config_json_serialization PASSED [ 48%]
tests/test_models.py::TestUpgradeTable::test_upgrade_table_basic PASSED  [ 48%]
tests/test_models.py::TestUpgradeTable::test_upgrade_table_json_serialization PASSED [ 49%]
tests/test_models.py::TestDuplicateRange::test_duplicate_range_basic PASSED [ 50%]
tests/test_models.py::TestDuplicateRange::test_duplicate_range_json_serialization PASSED [ 50%]
tests/test_models.py::TestCoinPerDuplicate::test_coin_per_duplicate_basic PASSED [ 51%]
tests/test_models.py::TestCoinPerDuplicate::test_coin_per_duplicate_json_serialization PASSED [ 51%]
tests/test_models.py::TestProgressionMapping::test_progression_mapping_basic PASSED [ 52%]
tests/test_models.py::TestProgressionMapping::test_progression_mapping_json_serialization PASSED [ 52%]
tests/test_models.py::TestSimConfig::test_sim_config_defaults PASSED     [ 53%]
tests/test_models.py::TestSimConfig::test_sim_config_with_custom_values PASSED [ 53%]
tests/test_models.py::TestSimConfig::test_sim_config_json_serialization PASSED [ 54%]
tests/test_models.py::TestSimResult::test_sim_result_basic PASSED        [ 55%]
tests/test_models.py::TestSimResult::test_sim_result_with_data PASSED    [ 55%]
tests/test_models.py::TestSimResult::test_sim_result_json_serialization PASSED [ 56%]
tests/test_models.py::TestIntegration::test_complex_game_state_serialization PASSED [ 56%]
tests/test_models.py::TestIntegration::test_full_sim_config_serialization PASSED [ 57%]
tests/test_monte_carlo.py::test_welford_accuracy PASSED                  [ 57%]
tests/test_monte_carlo.py::test_mc_10runs PASSED                         [ 58%]
tests/test_monte_carlo.py::test_reproducibility PASSED                   [ 59%]
tests/test_monte_carlo.py::test_confidence_intervals PASSED              [ 59%]
tests/test_monte_carlo.py::test_memory_safety PASSED                     [ 60%]
tests/test_monte_carlo.py::test_hard_cap_500 PASSED                      [ 60%]
tests/test_monte_carlo.py::test_performance_100_100 PASSED               [ 61%]
tests/test_monte_carlo.py::test_warning_200_runs PASSED                  [ 61%]
tests/test_monte_carlo.py::test_daily_accumulators PASSED                [ 62%]
tests/test_orchestrator.py::test_oneday_simulation PASSED                [ 63%]
tests/test_orchestrator.py::test_duplicates_accumulate PASSED            [ 63%]
tests/test_orchestrator.py::test_upgrades_fire PASSED                    [ 64%]
tests/test_orchestrator.py::test_unlock_schedule PASSED                  [ 64%]
tests/test_orchestrator.py::test_bluestar_accounting PASSED              [ 65%]
tests/test_orchestrator.py::test_coin_balance PASSED                     [ 65%]
tests/test_orchestrator.py::test_performance_100days PASSED              [ 66%]
tests/test_orchestrator.py::test_initial_state_setup PASSED              [ 67%]
tests/test_pack_system.py::TestCardTypesLookup::test_exact_key_match PASSED [ 67%]
tests/test_pack_system.py::TestCardTypesLookup::test_floor_lookup PASSED [ 68%]
tests/test_pack_system.py::TestCardTypesLookup::test_minimum_key PASSED  [ 68%]
tests/test_pack_system.py::TestCardTypesLookup::test_maximum_key PASSED  [ 69%]
tests/test_pack_system.py::TestCardTypesLookup::test_below_minimum_raises PASSED [ 69%]
tests/test_pack_system.py::TestProcessPacksZero::test_zero_packs_deterministic PASSED [ 70%]
tests/test_pack_system.py::TestProcessPacksZero::test_zero_packs_mc PASSED [ 71%]
tests/test_pack_system.py::TestProcessPacksDeterministic::test_round_half_up_2_5 PASSED [ 71%]
tests/test_pack_system.py::TestProcessPacksDeterministic::test_round_2_4_down PASSED [ 72%]
tests/test_pack_system.py::TestProcessPacksDeterministic::test_round_2_6_up PASSED [ 72%]
tests/test_pack_system.py::TestProcessPacksMultipleTypes::test_multiple_pack_types PASSED [ 73%]
tests/test_pack_system.py::TestProcessPacksMultipleTypes::test_card_types_floor_lookup_during_pull PASSED [ 73%]
tests/test_pack_system.py::TestProcessPacksMultipleTypes::test_floor_lookup_specific_scenario PASSED [ 74%]
tests/test_pack_system.py::TestProcessPacksMC::test_mc_poisson_distribution PASSED [ 75%]
tests/test_pack_system.py::TestProcessPacksMC::test_mc_repeatable_with_seed PASSED [ 75%]
tests/test_pack_system.py::TestCardPullDataclass::test_card_pull_creation PASSED [ 76%]
tests/test_pack_system.py::TestCardPullDataclass::test_card_pull_fields PASSED [ 76%]
tests/test_progression.py::TestGetMaxUniqueLevel::test_exact_boundary_shared_10_allows_unique_3 PASSED [ 77%]
tests/test_progression.py::TestGetMaxUniqueLevel::test_between_boundaries_shared_12_still_unique_3 PASSED [ 77%]
tests/test_progression.py::TestGetMaxUniqueLevel::test_first_boundary_shared_1 PASSED [ 78%]
tests/test_progression.py::TestGetMaxUniqueLevel::test_below_first_boundary PASSED [ 78%]
tests/test_progression.py::TestGetMaxUniqueLevel::test_above_all_boundaries_shared_100 PASSED [ 79%]
tests/test_progression.py::TestComputeProgressionScore::test_shared_card_50_level_equals_0_5 PASSED [ 80%]
tests/test_progression.py::TestComputeProgressionScore::test_unique_card_5_level_equals_0_5 PASSED [ 80%]
tests/test_progression.py::TestComputeProgressionScore::test_shared_card_100_level_equals_1_0 PASSED [ 81%]
tests/test_progression.py::TestComputeProgressionScore::test_unique_card_10_level_equals_1_0 PASSED [ 81%]
tests/test_progression.py::TestComputeProgressionScore::test_shared_card_0_level_equals_0 PASSED [ 82%]
tests/test_progression.py::TestComputeCategoryProgression::test_average_gold_cards PASSED [ 82%]
tests/test_progression.py::TestComputeCategoryProgression::test_average_unique_cards PASSED [ 83%]
tests/test_progression.py::TestComputeCategoryProgression::test_empty_category_returns_0 PASSED [ 84%]
tests/test_progression.py::TestComputeCategoryProgression::test_mixed_cards_filters_correctly PASSED [ 84%]
tests/test_progression.py::TestCanUpgradeUnique::test_can_upgrade_when_below_gate PASSED [ 85%]
tests/test_progression.py::TestCanUpgradeUnique::test_cannot_upgrade_at_gate PASSED [ 85%]
tests/test_progression.py::TestCanUpgradeUnique::test_cannot_upgrade_above_gate PASSED [ 86%]
tests/test_progression.py::TestCanUpgradeUnique::test_gate_increases_with_shared_progress PASSED [ 86%]
tests/test_progression.py::TestCanUpgradeUnique::test_raises_error_for_non_unique_card PASSED [ 87%]
tests/test_progression.py::TestGetUnlockedUniqueCount::test_day_35_with_schedule_1_8_30_1 PASSED [ 88%]
tests/test_progression.py::TestGetUnlockedUniqueCount::test_day_15_with_schedule_1_8_30_1 PASSED [ 88%]
tests/test_progression.py::TestGetUnlockedUniqueCount::test_day_1_starts_unlocks PASSED [ 89%]
tests/test_progression.py::TestGetUnlockedUniqueCount::test_day_0_no_unlocks PASSED [ 89%]
tests/test_progression.py::TestGetUnlockedUniqueCount::test_complex_schedule_day_100 PASSED [ 90%]
tests/test_progression.py::TestGetUnlockedUniqueCount::test_empty_schedule PASSED [ 90%]
tests/test_upgrade_engine.py::test_upgrade_success PASSED                [ 91%]
tests/test_upgrade_engine.py::test_blocked_by_duplicates PASSED          [ 92%]
tests/test_upgrade_engine.py::test_blocked_by_coins PASSED               [ 92%]
tests/test_upgrade_engine.py::test_blocked_by_gating PASSED              [ 93%]
tests/test_upgrade_engine.py::test_priority_order_unique_first PASSED    [ 93%]
tests/test_upgrade_engine.py::test_within_category_ordering PASSED       [ 94%]
tests/test_upgrade_engine.py::test_multiple_upgrades_per_day PASSED      [ 94%]
tests/test_upgrade_engine.py::test_bluestar_accumulation PASSED          [ 95%]
tests/test_upgrade_engine.py::test_maxed_card_not_eligible PASSED        [ 96%]
tests/test_upgrade_engine.py::test_maxed_shared_card_not_eligible PASSED [ 96%]
tests/test_upgrade_engine.py::test_upgrade_loop_continues_until_blocked PASSED [ 97%]
tests/test_url_config.py::test_round_trip PASSED                         [ 97%]
tests/test_url_config.py::test_url_safe PASSED                           [ 98%]
tests/test_url_config.py::test_corrupted_string PASSED                   [ 98%]
tests/test_url_config.py::test_empty_string PASSED                       [ 99%]
tests/test_url_config.py::test_compression_effectiveness PASSED          [100%]

============================= 176 passed in 35.81s =============================

Total tests run: 176
✅ All tests passed, 176 total (≥173 expected)
